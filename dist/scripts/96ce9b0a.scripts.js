"use strict";var app=angular.module("beardedNinjaApp",["ngCookies","ngResource","ngSanitize","ngRoute","infinite-scroll","angularFileUpload"]);app.config(["$httpProvider",function(a){a.defaults.useXDomain=!0,delete a.defaults.headers.common["X-Requested-With"]}]),app.config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/new",{templateUrl:"views/new.html",controller:"MainCtrl"}).when("/photo/:id",{templateUrl:"views/photo.html",controller:"PhotoCtrl"}).otherwise({redirectTo:"/"})}]);var app=angular.module("beardedNinjaApp");app.factory("Data",function(){var a={},b=function(){return(16777215*Math.random()<<0).toString(16)},c=0;return a.gen=function(){var a="http://placehold.it/450x350/"+b()+"/"+b()+"/&text=[1337";return{imageUrl:a+c++ +"]",id:c,created_at:event.timeStamp}},a}),app.controller("MainCtrl",["$scope","Data","$resource","$http",function(a,b,c,d){d.get("http://bearded-ninja-backend.herokuapp.com/images.json").success(function(b){console.log(b),a.images=b}),a.scroll=function(){a.images.push(b.gen())}}]);var app=angular.module("beardedNinjaApp");app.directive("myDraggable",["$document",function(a){return function(b,c){function d(a){i=a.pageY-g,h=a.pageX-f,c.css({top:i+"px",left:h+"px"})}function e(){a.off("mousemove",d),a.off("mouseup",e)}var f=0,g=0,h=0,i=0;c.css({position:"relative",cursor:"pointer"}),c.on("mousedown",function(b){b.preventDefault(),f=b.pageX-h,g=b.pageY-i,a.on("mousemove",d),a.on("mouseup",e)})}}]),app.controller("PhotoCtrl",["$scope","$routeParams","$http","Comments",function(a,b,c,d){c.get("http://bearded-ninja-backend.herokuapp.com/images/"+b.id+".json").success(function(c){console.log(c),console.log(b.id),console.log(c.name),a.image=c}),a.createComment=function(){d.create(a.comment).success(function(b){a.entries.push(b)}),a.comment={}}}]),app.factory("Comments",["$http",function(a){var b="http://bearded-ninja-backend.herokuapp.com/comments",c={};return c.all=function(){return a.get(b+".json")},c.create=function(c){return console.log("called"),a.post(b+".json",c)},c.delete=function(c){return a.delete(b+"/"+c.id+".json",c)},c}]),angular.module("beardedNinjaApp");var ImgCtrl=["$scope","$upload",function(a,b){a.onFileSelect=function(c){for(var d=0;d<c.length;d++){var e=c[d];a.upload=b.upload({url:"http://bearded-ninja-backend.herokuapp.com/images.json",method:"POST",data:{imgName:a.imgNameObj,imgTags:a.imgTagsObj,imgMature:a.imgMatureObj},file:e}).progress(function(a){console.log("percent: "+parseInt(100*a.loaded/a.total))}).success(function(a){console.log(a)})}}}];